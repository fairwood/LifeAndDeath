require=function t(e,a,o){function r(c,i){if(!a[c]){if(!e[c]){var s="function"==typeof require&&require;if(!i&&s)return s(c,!0);if(n)return n(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var p=a[c]={exports:{}};e[c][0].call(p.exports,function(t){var a=e[c][1][t];return r(a||t)},p,p.exports,t,e,a,o)}return a[c].exports}for(var n="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({AsyncLoadSprite:[function(t,e,a){"use strict";cc._RF.push(e,"39cbcBA8NhMbplhvYeYYTtc","AsyncLoadSprite"),Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,n=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delay=0,e.path="",e}return __extends(e,t),e.prototype.start=function(){setTimeout(this.loadSprite.bind(this),1e3*this.delay)},e.prototype.loadSprite=function(){try{var t=this;cc.loader.loadRes(t.path,cc.SpriteFrame,function(e,a){if(!e){var o=t.node.getComponent(cc.Sprite);o&&(o.spriteFrame=a)}})}catch(t){console.error(t)}},__decorate([n(cc.Float)],e.prototype,"delay",void 0),__decorate([n(cc.String)],e.prototype,"path",void 0),e=__decorate([r],e)}(cc.Component);a.default=c,cc._RF.pop()},{}],BaseUI:[function(t,e,a){"use strict";cc._RF.push(e,"3b934a4EjZFs6JzaRDhWpVf","BaseUI"),Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,n=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([r],e)}(cc.Component));a.default=n,cc._RF.pop()},{}],BattleEngine:[function(t,e,a){"use strict";cc._RF.push(e,"b5622fxQP1O075uU8OnTrkZ","BattleEngine"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("./Character"),r=t("../DataMgr"),n=t("../Utils/MathUtil"),c=t("../BattleUI"),i=t("../UI/ToastPanel"),s=t("./EnemyAI"),l=t("../CvsMain"),p=t("../ResultUI"),h=cc._decorator,d=h.ccclass,u=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.characterTemplate=null,e.characterContainer=null,e.projectileTemplate=null,e.projectileContainer=null,e.effImpactTemplate=null,e.effectContainer=null,e.chest=null,e.camera=null,e.lblLeftEnemy=null,e.lblReward=null,e.exp=0,e.pt=0,e.bounty=0,e.pxToMeter=.02,e.meterToPx=50,e}return __extends(e,t),e.prototype.onLoad=function(){this.characterTemplate.active=!1,this.projectileTemplate.active=!1,this.effImpactTemplate.active=!1,cc.director.getPhysicsManager().enabled=!0},e.prototype.start=function(){this.chest.active=!1},e.prototype.startBattle=function(t){this.clear();var e=cc.instantiate(this.characterTemplate);e.parent=this.characterContainer,this.mainCharacter=e.getComponent(o.Character),this.mainCharacter.setData(t,!1),e.active=!0;var a=0;for(var n in this.leftEnemyCnt=0,r.DataMgr.enemysData){var c=r.DataMgr.enemysData[n],i=cc.instantiate(this.characterTemplate);i.parent=this.characterContainer;var l=i.getComponent(o.Character);l.setData(c,!0);var p=r.DataMgr.getPosition(c.index);l.node.position=p.mul(this.meterToPx),i.active=!0,i.addComponent(s.EnemyAI),this.leftEnemyCnt+=1;var h=-p.x-p.y;h>a&&(a=h)}var d=-a/2-4.5;this.mainCharacter.node.position=new cc.Vec2(d,d).mul(this.meterToPx),this.chest.active=!0,this.exp=0,this.pt=0,this.bounty=0},e.prototype.update=function(t){if(this.mainCharacter){this.camera.position=n.default.lerpVec2(this.camera.position,this.mainCharacter.node.position,t);var e=c.default.Instance.joystick.displacement;this.mainCharacter.moveDisplacement=e,this.mainCharacter.attacking=c.default.Instance.attacking,this.lblLeftEnemy.string=this.leftEnemyCnt.toFixed()}},e.prototype.onEnemyDie=function(t){this.leftEnemyCnt-=1;var e=t.HPPt+t.ADPt+t.FRPt+t.RGPt+t.DGPt-r.DataMgr.freePt,a=Math.round(100*e*(.1+.1*Math.random()));this.exp+=a;var o=Math.floor(this.exp/100);this.exp-=100*o,this.pt+=o,i.default.Toast("+ "+a.toFixed()+" EXP"),t.bounty>0&&(this.bounty+=t.bounty,i.default.Toast("获得赏金 "+t.bounty.toPrecision(3)+" NAS"))},e.prototype.onMeDie=function(){var t=this;console.log("【onMeDie】"),setTimeout(function(){var e=r.DataMgr.resultData;e.isWin=!1,e.mainCharacterData=t.mainCharacter.data,e.bounty=t.bounty,t.clear(),l.default.EnterUI(p.default)},1e3)},e.prototype.win=function(){var t=r.DataMgr.resultData;t.isWin=!0,t.mainCharacterData=this.mainCharacter.data,t.bounty=0,this.clear(),l.default.EnterUI(p.default)},e.prototype.upgrade=function(t){if(!(this.pt<1)){this.pt-=1,this.mainCharacter.data[t+"Pt"]+=1;var e=r.DataMgr["get"+t],a=(Math.round(1e3*(e(1)-e(0)))/1e3).toString();switch(t){case"HP":i.default.Toast("+ "+a+" HP");break;case"AD":i.default.Toast("+ "+a+" AD");break;case"FR":i.default.Toast("+ "+a+" /s 射速");break;case"RG":i.default.Toast("+ "+a+" m 射程");break;case"DG":i.default.Toast("+ "+a+" % 闪避")}this.mainCharacter.didUpgrade()}},e.prototype.playImpactEffect=function(t){var e=cc.instantiate(this.effImpactTemplate);e.parent=this.effectContainer,e.position=t,e.active=!0,setTimeout(function(){e.destroy()},70)},e.prototype.clear=function(){this.characterContainer.destroyAllChildren(),this.projectileContainer.destroyAllChildren(),this.effectContainer.destroyAllChildren(),this.mainCharacter=null,this.chest.active=!1},e.pxToMeter=.02,e.meterToPx=50,__decorate([u(cc.Node)],e.prototype,"characterTemplate",void 0),__decorate([u(cc.Node)],e.prototype,"characterContainer",void 0),__decorate([u(cc.Node)],e.prototype,"projectileTemplate",void 0),__decorate([u(cc.Node)],e.prototype,"projectileContainer",void 0),__decorate([u(cc.Node)],e.prototype,"effImpactTemplate",void 0),__decorate([u(cc.Node)],e.prototype,"effectContainer",void 0),__decorate([u(cc.Node)],e.prototype,"chest",void 0),__decorate([u(cc.Node)],e.prototype,"camera",void 0),__decorate([u(cc.Label)],e.prototype,"lblLeftEnemy",void 0),__decorate([u(cc.Label)],e.prototype,"lblReward",void 0),e=__decorate([d],e)}(cc.Component);a.BattleEngine=f,cc._RF.pop()},{"../BattleUI":"BattleUI","../CvsMain":"CvsMain","../DataMgr":"DataMgr","../ResultUI":"ResultUI","../UI/ToastPanel":"ToastPanel","../Utils/MathUtil":"MathUtil","./Character":"Character","./EnemyAI":"EnemyAI"}],BattleUI:[function(t,e,a){"use strict";cc._RF.push(e,"d2d4ehqPFVDS4fv9l1Oq7He","BattleUI"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("./CvsMain"),r=t("./BaseUI"),n=t("./MainCtrl"),c=t("./HomeUI"),i=t("./Battle/Joystick"),s=cc._decorator,l=s.ccclass,p=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnAttack=null,e.joystick=null,e.grpUpgrade=null,e.prgExp=null,e.lblExp=null,e.lblBounty=null,e.lblHP=null,e.lblAD=null,e.lblFR=null,e.lblRG=null,e.lblDG=null,e}return __extends(e,t),a=e,e.prototype.onLoad=function(){a.Instance=this,this.node.active=!1,this.btnAttack.on(cc.Node.EventType.TOUCH_START,this.onAttackDown,this),this.btnAttack.on(cc.Node.EventType.TOUCH_END,this.onAttackUp,this),this.btnAttack.on(cc.Node.EventType.TOUCH_CANCEL,this.onAttackUp,this);var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(console.log("key down",e.keyCode,cc.KEY.space),e.keyCode){case cc.KEY.space:t.attacking=!0}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){switch(e.keyCode){case cc.KEY.space:t.attacking=!1}})},e.prototype.onEnable=function(){this.attacking=!1},e.prototype.update=function(){var t=n.default.Instance.engine;this.grpUpgrade.active=n.default.Instance.engine.pt>=1,this.prgExp.progress=n.default.Instance.engine.exp/100,this.lblExp.string=n.default.Instance.engine.exp.toFixed()+"/ 100";var e=n.default.Instance.engine.mainCharacter;this.lblHP.string=e.HP.toFixed()+" HP",this.lblAD.string=e.AD.toFixed()+" AD",this.lblFR.string=e.FR.toPrecision(2)+"/s 射速",this.lblRG.string=e.RG.toPrecision(2)+"m 射程",this.lblDG.string=e.DG.toPrecision(2)+"% 闪避",this.lblBounty.string=t.bounty+"NAS"},e.prototype.onAttackDown=function(){this.attacking=!0},e.prototype.onAttackUp=function(){this.attacking=!1},e.prototype.onUpgradeClick=function(t,e){n.default.Instance.engine.upgrade(e)},e.prototype.onQuitClick=function(){n.default.Instance.engine.clear(),o.default.EnterUI(c.default)},__decorate([p(cc.Node)],e.prototype,"btnAttack",void 0),__decorate([p(i.Joystick)],e.prototype,"joystick",void 0),__decorate([p(cc.Node)],e.prototype,"grpUpgrade",void 0),__decorate([p(cc.ProgressBar)],e.prototype,"prgExp",void 0),__decorate([p(cc.Label)],e.prototype,"lblExp",void 0),__decorate([p(cc.Label)],e.prototype,"lblBounty",void 0),__decorate([p(cc.Label)],e.prototype,"lblHP",void 0),__decorate([p(cc.Label)],e.prototype,"lblAD",void 0),__decorate([p(cc.Label)],e.prototype,"lblFR",void 0),__decorate([p(cc.Label)],e.prototype,"lblRG",void 0),__decorate([p(cc.Label)],e.prototype,"lblDG",void 0),e=a=__decorate([l],e);var a}(r.default);a.default=h,cc._RF.pop()},{"./BaseUI":"BaseUI","./Battle/Joystick":"Joystick","./CvsMain":"CvsMain","./HomeUI":"HomeUI","./MainCtrl":"MainCtrl"}],BlockchainMgr:[function(t,e,a){"use strict";cc._RF.push(e,"3ffefed5pBCD40DXf/kM6bs","BlockchainMgr"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("./DialogPanel"),r=t("./MainCtrl"),n=cc._decorator,c=n.ccclass;n.property;a.ContractAddress="n22G75ztMvYc82VkG2bDXkqhY8ZhvVbqPKf",a.EncKey=37234;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.checkWalletCountdown=1e9,e.fetchMyDataInterval=1e9,e.fetchAllDataCountdown=1e9,e}return __extends(e,t),n=e,e.prototype.onLoad=function(){n.Instance=this},e.prototype.start=function(){this.checkWalletCountdown=1,this.fetchMyDataInterval=1,this.fetchAllDataCountdown=10},e.prototype.update=function(t){try{Neb,NebPay}catch(t){return}if(this.checkWalletCountdown-=t,this.fetchMyDataInterval-=t,this.fetchAllDataCountdown-=t,this.checkWalletCountdown<=0){try{var e=this;(h=new Neb).setRequest(new HttpRequest(n.BlockchainUrl)),h.api.getNebState().then(function(t){window.addEventListener("message",e.onGetWalletData),window.postMessage({target:"contentscript",data:{},method:"getAccount"},"*")})}catch(t){console.error(t)}this.checkWalletCountdown=n.CheckWalletInterval}if(this.fetchMyDataInterval<=0&&n.WalletAddress){(h=new Neb).setRequest(new HttpRequest(n.BlockchainUrl));var o=n.WalletAddress,c="0",i="0",s="1000000",l="2000000",p={function:"getUser",args:JSON.stringify([n.WalletAddress])};h.api.call(o,a.ContractAddress,c,i,s,l,p).then(r.default.Instance.onGetMyData).catch(function(t){console.log("call mydata error:"+t.message,o)}),this.fetchMyDataInterval=n.FetchMyDataInterval}if(this.fetchAllDataCountdown<=0){var h;(h=new Neb).setRequest(new HttpRequest(n.BlockchainUrl));var d=n.WalletAddress?n.WalletAddress:Account.NewAccount().getAddressString();c="0",i="0",s="1000000",l="2000000",p={function:"getMapInfo",args:"[]"};h.api.call(d,a.ContractAddress,c,i,s,l,p).then(r.default.Instance.onGetMapData).catch(function(t){console.log("call get_map_info error:"+t.message)}),this.fetchAllDataCountdown=n.FetchAllDataInterval}},e.prototype.getFunction=function(t,e,o){try{var r=new Neb;r.setRequest(new HttpRequest(n.BlockchainUrl)),console.log("区块链getFunction(",t,e);var c=n.WalletAddress?n.WalletAddress:Account.NewAccount().getAddressString(),i={function:t,args:JSON.stringify(e)};r.api.call(c,a.ContractAddress,"0","0","1000000","2000000",i).then(o).catch(function(e){console.error("Neb call "+t+" error:"+e.message)})}catch(t){console.error(t)}},e.prototype.onGetWalletData=function(t){if(t.data&&t.data.data&&t.data.data.account&&t.data.data.account.length>0){var e=t.data.data.account;n.WalletAddress!=e&&(console.log("Change wallet address:",e),n.WalletAddress=e)}},e.prototype.callFunction=function(t,e,r,c){try{window.webExtensionWallet||o.default.PopupWith2Buttons("正在调用钱包","如果没有跳转到钱包，说明您没有安装区块链钱包或钱包插件，可点击按钮前去安装。","安装",function(){window.open("https://github.com/ChengOrangeJu/WebExtensionWallet")},"确定",null),r=Math.ceil(1e10*r)/1e10,console.log("调用钱包(",t,e,r);var i=new NebPay,s=n.BlockchainUrl,l=a.ContractAddress;i.call(l,r,t,JSON.stringify(e),{qrcode:{showQRCode:!1},goods:{name:"test",desc:"test goods"},callback:s,listener:c})}catch(t){console.error(t)}},e.encrypto=function(t,e,a){if("string"==typeof t&&"number"==typeof e&&"number"==typeof a){var o=[];a=a<=25?a:a%25;for(var r=0;r<t.length;r++){var n=t.charCodeAt(r);n=(n=1*n^e).toString(a),o.push(n)}var c=String.fromCharCode(a+97);return o.join(c)}},e.BlockchainUrl="https://testnet.nebulas.io",e.CheckWalletInterval=10,e.FetchMyDataInterval=5,e.FetchAllDataInterval=20,e=n=__decorate([c],e);var n}(cc.Component);a.default=i,cc._RF.pop()},{"./DialogPanel":"DialogPanel","./MainCtrl":"MainCtrl"}],CharacterActor:[function(t,e,a){"use strict";cc._RF.push(e,"4a47dfqR6pA45Qnr6cwsgcN","CharacterActor"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("./DataMgr"),r=cc._decorator,n=r.ccclass,c=r.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hair=null,e.face=null,e.body=null,e.mouth=null,e.eyes=null,e.horn=null,e.wing=null,e}return __extends(e,t),e.prototype.setAndRefresh=function(t,e){var a=o.DataMgr.getAppearance(t);try{var r=this;cc.loader.loadRes("hair/"+a.hair.toFixed(),cc.SpriteFrame,function(t,e){t?console.error("err",t):r.hair.spriteFrame=e})}catch(t){console.error(t)}if(this.face.node.scaleX=a.faceScale,this.body.node.scaleX=a.bodyScale,this.mouth.enabled=e,this.horn&&(this.horn.enabled=e),this.eyes.node.color=e?new cc.Color(255,60,60):cc.Color.BLACK,this.wing)try{var n=this;cc.loader.loadRes("wing/"+a.wing.toFixed(),cc.SpriteFrame,function(t,e){t?console.error("err",t):n.wing.spriteFrame=e})}catch(t){console.error(t)}},__decorate([c(cc.Sprite)],e.prototype,"hair",void 0),__decorate([c(cc.Sprite)],e.prototype,"face",void 0),__decorate([c(cc.Sprite)],e.prototype,"body",void 0),__decorate([c(cc.Sprite)],e.prototype,"mouth",void 0),__decorate([c(cc.Sprite)],e.prototype,"eyes",void 0),__decorate([c(cc.Sprite)],e.prototype,"horn",void 0),__decorate([c(cc.Sprite)],e.prototype,"wing",void 0),e=__decorate([n],e)}(cc.Component);a.CharacterActor=i,cc._RF.pop()},{"./DataMgr":"DataMgr"}],Character:[function(t,e,a){"use strict";cc._RF.push(e,"25584hJ1jxBmLnPk97/lWG+","Character"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("../CharacterActor"),r=t("../DataMgr"),n=t("./BattleEngine"),c=t("../MainCtrl"),i=t("./Projectile"),s=cc._decorator,l=s.ccclass,p=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hpbar=null,e.lblBounty=null,e.lblLv=null,e.actor=null,e.HUD=null,e.cldr=null,e.isEnemy=!1,e.alive=!0,e.defaultShootDirection=cc.Vec2.ONE.normalize(),e.takenDamage=0,e}return __extends(e,t),a=e,Object.defineProperty(e.prototype,"pos",{get:function(){return this.node.position.mul(n.BattleEngine.pxToMeter)},set:function(t){this.node.position=t.mul(n.BattleEngine.meterToPx)},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.leftCDPercent=0},e.prototype.setData=function(t,e){this.data=t,this.HPMax=r.DataMgr.getHP(t.HPPt),this.HP=this.HPMax,this.AD=r.DataMgr.getAD(t.ADPt),this.FR=r.DataMgr.getFR(t.FRPt),this.RG=r.DataMgr.getRG(t.RGPt),this.DG=r.DataMgr.getDG(t.DGPt),this.isEnemy=e,this.LV=t.HPPt+t.ADPt+t.FRPt+t.RGPt+t.DGPt-r.DataMgr.freePt,this.lblLv.string=(this.LV+1).toFixed(),this.lblBounty.string=t.bounty>1e-4?"$"+t.bounty.toPrecision(3):"",this.actor.setAndRefresh(t.nonce,e),this.node.groupIndex=e?2:1,this.cldr.apply()},e.prototype.update=function(t){if(this.alive){if(this.HUD&&(this.hpbar.progress=this.HP/this.HPMax),this.moveDisplacement&&this.moveDisplacement.mag()>0&&(this.moveToward(this.moveDisplacement,t),this.defaultShootDirection=this.moveDisplacement.normalize()),this.attacking&&this.leftCDPercent<=0){var e=this.getTarget(),a=void 0;a=e?e.pos.sub(this.pos):this.defaultShootDirection,console.log("TODO: attack!!! "+(e?e.pos:"null")),(c=(o=this.createProjectile()).getComponent(i.Projectile)).velocity=a.normalize().mul(r.DataMgr.getProjectileSpeed(this.isEnemy)),c.pos=this.pos,c.setData(this.isEnemy,this.AD,this.RG/r.DataMgr.getProjectileSpeed(this.isEnemy)),o.getComponent(cc.RigidBody).linearVelocity=a.normalize().mul(r.DataMgr.getProjectileSpeed(this.isEnemy)*n.BattleEngine.meterToPx),this.leftCDPercent=1}var o,c;if(this.wantAttackDirection)if(this.leftCDPercent<=0)(c=(o=this.createProjectile()).getComponent(i.Projectile)).velocity=this.wantAttackDirection.normalize().mul(r.DataMgr.getProjectileSpeed(this.isEnemy)),c.pos=this.pos,c.setData(this.isEnemy,this.AD,this.RG/r.DataMgr.getProjectileSpeed(this.isEnemy)),o.getComponent(cc.RigidBody).linearVelocity=c.velocity.mul(n.BattleEngine.meterToPx),this.leftCDPercent=1;var s=1/this.FR;this.leftCDPercent-=t/s,this.takenDamage>0&&(this.HP-=1*this.takenDamage,this.HP<=0&&this.die()),this.takenDamage=0}},e.prototype.didUpgrade=function(){var t=this.HPMax;this.HPMax=r.DataMgr.getHP(this.data.HPPt),this.HP+=this.HPMax-t,this.AD=r.DataMgr.getAD(this.data.ADPt),this.FR=r.DataMgr.getFR(this.data.FRPt),this.RG=r.DataMgr.getRG(this.data.RGPt),this.DG=r.DataMgr.getDG(this.data.DGPt),this.LV=this.data.HPPt+this.data.ADPt+this.data.FRPt+this.data.RGPt+this.data.DGPt-r.DataMgr.freePt,this.lblLv.string=(this.LV+1).toFixed()},e.prototype.moveToward=function(t,e){this.pos=this.pos.add(t.normalize().mul(r.DataMgr.MS*e))},e.prototype.getTarget=function(){var t=1e21,e=null,o=c.default.Instance.engine,r=this;return o.characterContainer.children.forEach(function(o){var n=o.getComponent(a);if(n&&n.isEnemy!=r.isEnemy){var c=n.pos.sub(r.pos).mag();c>r.RG||(!e||c<t)&&(e=n,t=c)}}),e},e.prototype.createProjectile=function(){var t=cc.instantiate(c.default.Instance.engine.projectileTemplate);return t.parent=c.default.Instance.engine.projectileContainer,t.active=!0,t},e.prototype.takeDamage=function(t){this.takenDamage+=t},e.prototype.die=function(){this.alive=!1,this.node.groupIndex=0,this.cldr.apply(),this.HUD.destroy(),this.node.setPositionY(this.node.getPositionY()-20),this.node.rotation=90,this.isEnemy?c.default.Instance.engine.onEnemyDie(this.data):c.default.Instance.engine.onMeDie()},__decorate([p(cc.ProgressBar)],e.prototype,"hpbar",void 0),__decorate([p(cc.Label)],e.prototype,"lblBounty",void 0),__decorate([p(cc.Label)],e.prototype,"lblLv",void 0),__decorate([p(o.CharacterActor)],e.prototype,"actor",void 0),__decorate([p(cc.Node)],e.prototype,"HUD",void 0),__decorate([p(cc.PhysicsCollider)],e.prototype,"cldr",void 0),e=a=__decorate([l],e);var a}(cc.Component);a.Character=h,cc._RF.pop()},{"../CharacterActor":"CharacterActor","../DataMgr":"DataMgr","../MainCtrl":"MainCtrl","./BattleEngine":"BattleEngine","./Projectile":"Projectile"}],Chest:[function(t,e,a){"use strict";cc._RF.push(e,"2d97f9LDFxHHY3ue9Tb9CKB","Chest"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("../MainCtrl"),r=cc._decorator,n=r.ccclass,c=r.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hint=null,e.lblLeftEnemy=null,e.lblTotalReward=null,e}return __extends(e,t),e.prototype.update=function(){var t=o.default.Instance.engine.mainCharacter,e=t&&t.node.position.sub(this.node.position).mag()<50;this.hint.active=e,e&&o.default.Instance.engine.leftEnemyCnt<=0&&o.default.Instance.engine.win()},__decorate([c(cc.Node)],e.prototype,"hint",void 0),__decorate([c(cc.Label)],e.prototype,"lblLeftEnemy",void 0),__decorate([c(cc.Label)],e.prototype,"lblTotalReward",void 0),e=__decorate([n],e)}(cc.Component);a.Chest=i,cc._RF.pop()},{"../MainCtrl":"MainCtrl"}],CurrencyFormatter:[function(t,e,a){"use strict";cc._RF.push(e,"4455937OnBAOLdRb9e7YASo","CurrencyFormatter"),Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,n=(o.property,function(){function t(){}return t.formatBTC=function(t){if(Math.abs(t)<1e-7)return"0";var e=Math.max(0,Math.floor(Math.log(t)/Math.LN10));return t.toFixed(Math.max(0,5-e))},t.formatNAS=function(t){var e=Math.max(0,Math.floor(Math.log(t)/Math.LN10));return t.toFixed(Math.min(3,Math.max(0,4-e)))},t.formatCNY=function(t){if(Math.abs(t)<.005)return"0";var e=Math.max(0,Math.floor(Math.log(t)/Math.LN10));return t.toFixed(Math.min(2,Math.max(0,4-e)))},t=__decorate([r],t)}());a.default=n,cc._RF.pop()},{}],CvsMain:[function(t,e,a){"use strict";cc._RF.push(e,"69237yn4edJBK/5XvDAGlzX","CvsMain"),Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,n=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fitter=null,e.uiContainer=null,e}return __extends(e,t),a=e,e.prototype.onLoad=function(){a.Instance=this,this.uiContainer.children.forEach(function(t){return t.active=!0})},e.EnterUI=function(t){this.Instance.uiContainer.children.forEach(function(e){e.getComponent(t)?e.active=!0:e.active=!1})},e.prototype.update=function(){var t=cc.view.getVisibleSize();this.lastVisibleSize&&t.equals(this.lastVisibleSize)||(t.width>=t.height?(this.fitter.rotation=0,this.fitter.scale=1,this.fitter.setContentSize(1080/t.height*t.width,1080)):(this.fitter.rotation=90,this.fitter.setContentSize(1080/t.width*t.height,1080),this.fitter.scale=t.width/1080),this.lastVisibleSize=t)},__decorate([n(cc.Node)],e.prototype,"fitter",void 0),__decorate([n(cc.Node)],e.prototype,"uiContainer",void 0),e=a=__decorate([r],e);var a}(cc.Component);a.default=c,cc._RF.pop()},{}],DataMgr:[function(t,e,a){"use strict";cc._RF.push(e,"c6c13KfXfRK06sYYQzi7BU0","DataMgr"),Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(){}return t.init=function(){this.inited||(this.inited=!0)},t.clearData=function(){cc.sys.localStorage.removeItem("user0"),cc.sys.localStorage.removeItem("user0Building")},t.getProjectileSpeed=function(t){return t?3:12},t.getExtraPt=function(t){return t/.01},t.getHP=function(t){return 30+10*t},t.getAD=function(t){return 4+1*t},t.getFR=function(t){return Math.round(10*(.7+.1*t))/10},t.getRG=function(t){return 3+.5*t},t.getDG=function(t){return 1-Math.pow(.99,t)},t.getAppearance=function(t){return{hair:Math.floor(12*this.APHash1("hair"+t.toFixed())),faceScale:1-.25*this.APHash1("face"+t.toFixed()),bodyScale:.8+.25*this.APHash1("body"+t.toFixed()),wing:Math.floor(4*this.APHash1("wing"+t.toFixed()))}},t.getPosition=function(t){var e=this.APHash1(t.toFixed()+"theta"),a=this.APHash1(t.toFixed()+"rho"),o=e*Math.PI*2,r=(1-a*a)*(5+Math.pow(t,.5)),n=Math.cos(o)*r,c=Math.sin(o)*r;return new cc.Vec2(n,c)},t.APHash1=function(t){for(var e=2863311530,a=0;a<t.length;a++)e^=0==(1&a)?e<<7^t.charCodeAt(a)*(e>>3):~((e<<11)+t.charCodeAt(a)^e>>5);return e/2863311530/1.5+.5},t.readExtraPt=function(){var t=0;try{t=parseFloat(cc.sys.localStorage.getItem("extraPt")),isNaN(t)&&(t=0),console.log("finish read extraPt",t)}catch(t){console.error(t)}return t},t.writeExtraPt=function(t){try{cc.sys.localStorage.setItem("extraPt",t.toFixed()),console.log("finish write extraPt",t)}catch(t){console.error(t)}},t.freePt=15,t.extraPt=0,t.enemysData={},t.totalReward=0,t.resultData={isWin:!1,mainCharacterData:null,bounty:0},t.inited=!1,t.MS=4,t}();a.DataMgr=o;var r=function(){};a.UserData=r;var n=function(){};a.EnemyData=n,cc._RF.pop()},{}],DialogPanel:[function(t,e,a){"use strict";cc._RF.push(e,"c0958fmSyFAp6wyHbHS0e10","DialogPanel"),Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,n=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTitle=null,e.lblContext=null,e.btn0=null,e.lblBtn0=null,e.btn1=null,e.lblBtn1=null,e}return __extends(e,t),a=e,e.prototype.onLoad=function(){a.Instance=this,this.hide()},e.PopupWithOKButton=function(t,e){a.PopupWith1Button(t,e,"确定",null)},e.PopupWith1Button=function(t,e,a,o){this.Instance.show(),this.Instance.lblTitle.string=t,this.Instance.lblContext.string=e,this.Instance.func0=o,this.Instance.lblBtn0.string=a,this.Instance.btn0.active=!0,this.Instance.btn0.position=new cc.Vec2(0,0),this.Instance.btn1.active=!1},e.PopupWith2Buttons=function(t,e,a,o,r,n){this.Instance.show(),this.Instance.lblTitle.string=t,this.Instance.lblContext.string=e,this.Instance.func0=o,this.Instance.lblBtn0.string=a,this.Instance.btn0.active=!0,this.Instance.btn0.position=new cc.Vec2(-150,0),this.Instance.func1=n,this.Instance.lblBtn1.string=r,this.Instance.btn1.active=!0,this.Instance.btn1.position=new cc.Vec2(150,0)},e.prototype.onBtn0Click=function(){this.func0&&this.func0(),this.hide()},e.prototype.onBtn1Click=function(){this.func1&&this.func1(),this.hide()},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},__decorate([n(cc.Label)],e.prototype,"lblTitle",void 0),__decorate([n(cc.Label)],e.prototype,"lblContext",void 0),__decorate([n(cc.Node)],e.prototype,"btn0",void 0),__decorate([n(cc.Label)],e.prototype,"lblBtn0",void 0),__decorate([n(cc.Node)],e.prototype,"btn1",void 0),__decorate([n(cc.Label)],e.prototype,"lblBtn1",void 0),e=a=__decorate([r],e);var a}(cc.Component);a.default=c,cc._RF.pop()},{}],EnemyAI:[function(t,e,a){"use strict";cc._RF.push(e,"91989faIidAzrE/pdhEjR0t","EnemyAI"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("./Character"),r=t("../MainCtrl"),n=cc._decorator,c=n.ccclass,i=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){this.target=r.default.Instance.engine.mainCharacter,this.me=this.node.getComponent(o.Character)},e.prototype.update=function(){if(this.me.wantAttackDirection=null,this.target&&this.target.alive&&this.target.pos.sub(this.me.pos).mag()<=this.me.RG+.5){var t=this.target.pos.sub(this.me.pos).normalize(),e=Math.atan2(t.y,t.x);e+=Math.PI/180*15*(2*Math.random()-1),this.me.wantAttackDirection=new cc.Vec2(Math.cos(e),Math.sin(e))}},e=__decorate([c],e)}(cc.Component));a.EnemyAI=i,cc._RF.pop()},{"../MainCtrl":"MainCtrl","./Character":"Character"}],Foreground:[function(t,e,a){"use strict";cc._RF.push(e,"c7a1eqdirtJGpHjde8W3SsV","Foreground"),Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,n=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){this.node.children.forEach(function(t){t.active||(t.active=!0,t.active=!1)})},e=__decorate([r],e)}(cc.Component));a.default=n,cc._RF.pop()},{}],HomeUI:[function(t,e,a){"use strict";cc._RF.push(e,"458fd6d6ChEGo+U+drv+haG","HomeUI"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("./BaseUI"),r=t("./MainCtrl"),n=t("./UI/PropertyLine"),c=t("./DataMgr"),i=t("./CharacterActor"),s=t("./BlockchainMgr"),l=t("./UI/RechargePanel"),p=cc._decorator,h=p.ccclass,d=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.edtNickname=null,e.lblTotalPt=null,e.characterActor=null,e.prlHP=null,e.prlAD=null,e.prlFR=null,e.prlRG=null,e.prlDG=null,e.ptArray=[],e.nonce=0,e}return __extends(e,t),a=e,e.prototype.onLoad=function(){a.Instance=this,this.node.active=!1;for(var t=0;t<5;t++)this.ptArray.push(0)},e.prototype.start=function(){this.randomize()},e.prototype.randomRange=function(t,e){return t+Math.floor(Math.random()*(e-t))},e.prototype.randomize=function(){for(var t=c.DataMgr.freePt+c.DataMgr.extraPt,e=0;e<5;e++)this.ptArray[e]=0;for(e=0;e<t;e++){var a=this.randomRange(0,5);this.ptArray[a]+=1}this.nonce=this.randomRange(0,1e7),this.refresh()},e.prototype.update=function(){var t=c.DataMgr.freePt+c.DataMgr.extraPt;this.lblTotalPt.string="共 "+t+" pt"},e.prototype.refresh=function(){this.prlHP.setAndRefresh(this.ptArray[0],c.DataMgr.getHP(this.ptArray[0])),this.prlAD.setAndRefresh(this.ptArray[1],c.DataMgr.getAD(this.ptArray[1])),this.prlFR.setAndRefresh(this.ptArray[2],c.DataMgr.getFR(this.ptArray[2])),this.prlRG.setAndRefresh(this.ptArray[3],c.DataMgr.getRG(this.ptArray[3]));var t=c.DataMgr.getDG(this.ptArray[4]);t=Math.round(1e4*t)/100,this.prlDG.setAndRefresh(this.ptArray[4],t),this.characterActor.setAndRefresh(this.nonce,!1)},e.prototype.onStartBattleClick=function(){this.onCheatClick();for(var t=0,e=0;e<5;e++)t+=this.ptArray[e];t-=c.DataMgr.freePt,c.DataMgr.extraPt=Math.max(0,c.DataMgr.extraPt-t),c.DataMgr.writeExtraPt(c.DataMgr.extraPt);var a={HPPt:this.ptArray[0],ADPt:this.ptArray[1],FRPt:this.ptArray[2],RGPt:this.ptArray[3],DGPt:this.ptArray[4],nonce:this.nonce,nickname:this.edtNickname.string,address:s.default.WalletAddress};c.DataMgr.mainCharacter=a,r.default.Instance.startBattle()},e.prototype.onRechargeClick=function(){l.default.Instance.node.active=!0},e.prototype.onCheatClick=function(){console.log("CHEAT!"),c.DataMgr.enemysData={};for(var t=0;t<20;t++){var e=new c.EnemyData;e.nickname=c.DataMgr.APHash1("nickname"+t).toString(),e.address=c.DataMgr.APHash1("addr"+t).toString(),e.nonce=Math.floor(1e7*Math.random()),e.index=2+4*t,e.bounty=2*Math.random(),e.HPPt=2+Math.floor(Math.random()*(1+t/6)),e.ADPt=3+Math.floor(Math.random()*(1+t/6)),e.FRPt=4+Math.floor(Math.random()*(1+t/6)),e.RGPt=2+Math.floor(Math.random()*(1+t/6)),e.DGPt=2+Math.floor(Math.random()*(1+t/6)),c.DataMgr.enemysData[e.address]=e}},__decorate([d(cc.EditBox)],e.prototype,"edtNickname",void 0),__decorate([d(cc.Label)],e.prototype,"lblTotalPt",void 0),__decorate([d(i.CharacterActor)],e.prototype,"characterActor",void 0),__decorate([d(n.PropertyLine)],e.prototype,"prlHP",void 0),__decorate([d(n.PropertyLine)],e.prototype,"prlAD",void 0),__decorate([d(n.PropertyLine)],e.prototype,"prlFR",void 0),__decorate([d(n.PropertyLine)],e.prototype,"prlRG",void 0),__decorate([d(n.PropertyLine)],e.prototype,"prlDG",void 0),e=a=__decorate([h],e);var a}(o.default);a.default=u,cc._RF.pop()},{"./BaseUI":"BaseUI","./BlockchainMgr":"BlockchainMgr","./CharacterActor":"CharacterActor","./DataMgr":"DataMgr","./MainCtrl":"MainCtrl","./UI/PropertyLine":"PropertyLine","./UI/RechargePanel":"RechargePanel"}],IntroUI:[function(t,e,a){"use strict";cc._RF.push(e,"09076VctrZEVKhEeIiQ5hEn","IntroUI"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("../CvsMain"),r=t("../HomeUI"),n=cc._decorator,c=n.ccclass,i=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onBtnStartClick=function(){o.default.EnterUI(r.default)},e=__decorate([c],e)}(cc.Component));a.default=i,cc._RF.pop()},{"../CvsMain":"CvsMain","../HomeUI":"HomeUI"}],Joystick:[function(t,e,a){"use strict";cc._RF.push(e,"27845cZ0o9Fu7RzAUHZ9Ehs","Joystick"),Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,n=o.property,c=function(t){function e(){var e,a=null!==t&&t.apply(this,arguments)||this;return a.circle=null,a.knob=null,a.wasdPressDict=((e={})[cc.KEY.w]=!1,e[cc.KEY.a]=!1,e[cc.KEY.s]=!1,e[cc.KEY.d]=!1,e),a}return __extends(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onInputDown,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onInputDrag,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onInputUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onInputUp,this);var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){t.wasdPressDict[e.keyCode]=!0}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){t.wasdPressDict[e.keyCode]=!1})},e.prototype.update=function(){this.displacement=cc.Vec2.ZERO;var t=new cc.Vec2(0,0);this.wasdPressDict[cc.KEY.w]&&t.addSelf(new cc.Vec2(0,1)),this.wasdPressDict[cc.KEY.a]&&t.addSelf(new cc.Vec2(-1,0)),this.wasdPressDict[cc.KEY.s]&&t.addSelf(new cc.Vec2(0,-1)),this.wasdPressDict[cc.KEY.d]&&t.addSelf(new cc.Vec2(1,0)),this.displacement=t.clone(),this.touchDisplacement&&this.displacement.addSelf(this.touchDisplacement),this.displacement.mag()<=0&&(this.displacement=null)},e.prototype.onInputDown=function(t){this.pressing=!0;var e=t.getStartLocation();this.touchDisplacement=null,this.circle.position=e},e.prototype.onInputDrag=function(t){var e=t.getStartLocation(),a=t.getLocation();this.touchDisplacement=new cc.Vec2(a.x-e.x,a.y-e.y),this.circle.position=e,this.knob.position=this.touchDisplacement.normalize().mul(Math.min(92,this.touchDisplacement.mag()))},e.prototype.onInputUp=function(t){this.pressing=!1,this.touchDisplacement=null,this.circle.position=new cc.Vec2(225,225),this.knob.position=cc.Vec2.ZERO},__decorate([n(cc.Node)],e.prototype,"circle",void 0),__decorate([n(cc.Node)],e.prototype,"knob",void 0),e=__decorate([r],e)}(cc.Component);a.Joystick=c,cc._RF.pop()},{}],MainCtrl:[function(t,e,a){"use strict";cc._RF.push(e,"162b9/mIe1LjqpHBpjQnzp+","MainCtrl"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("./CvsMain"),r=t("./DataMgr"),n=t("./UI/IntroUI"),c=t("./Battle/BattleEngine"),i=t("./BattleUI"),s=cc._decorator,l=s.ccclass,p=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.engine=null,e}return __extends(e,t),a=e,e.prototype.onLoad=function(){a.Instance=this,r.DataMgr.init(),r.DataMgr.extraPt=r.DataMgr.readExtraPt()},e.prototype.start=function(){var t=this;o.default.EnterUI(n.default),setTimeout(function(){var e=cc.url.raw("resources/audio/bgm.mp3");t.bgmHandler=cc.audioEngine.play(e,!0,.5)},1e3)},e.prototype.update=function(t){a.Ticks++},e.prototype.startBattle=function(){o.default.EnterUI(i.default),this.engine.startBattle(r.DataMgr.mainCharacter)},e.prototype.onGetMyData=function(t){console.log("onGetMyData",t);var e=JSON.parse(t.result);if(e){r.DataMgr.myData=e;var a=null;try{a=JSON.parse(cc.sys.localStorage.getItem("user0")),console.log("finish read data",a)}catch(t){console.error(t)}if(a){if(e.rechargeTimestamp&&a.rechargeTimestamp<e.rechargeTimestamp){r.DataMgr.extraPt+=r.DataMgr.getExtraPt(e.newRecharge),r.DataMgr.writeExtraPt(r.DataMgr.extraPt),a.rechargeTimestamp=e.rechargeTimestamp;try{cc.sys.localStorage.setItem("user0",JSON.stringify(a)),console.log("finish write data",a)}catch(t){console.error(t)}}}else{a=e;try{cc.sys.localStorage.setItem("user0",JSON.stringify(a)),console.log("finish write data",a)}catch(t){console.error(t)}}}},e.prototype.onGetMapData=function(t){console.log("onGetMapData",t);var e=JSON.parse(t.result).resultData.enemys;r.DataMgr.enemysData={},e.forEach(function(t){r.DataMgr.enemysData[t.index]=t})},e.Ticks=0,__decorate([p(c.BattleEngine)],e.prototype,"engine",void 0),e=a=__decorate([l],e);var a}(cc.Component);a.default=h,cc._RF.pop()},{"./Battle/BattleEngine":"BattleEngine","./BattleUI":"BattleUI","./CvsMain":"CvsMain","./DataMgr":"DataMgr","./UI/IntroUI":"IntroUI"}],MathUtil:[function(t,e,a){"use strict";cc._RF.push(e,"3be564zKv9E0oRVEIsuB7L4","MathUtil"),Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(){}return t.lerp=function(t,e,a,o){return o&&(a=Math.max(0,Math.min(1,a))),t*(1-a)+e*a},t.lerpVec2=function(t,e,a,o){return o&&(a=Math.max(0,Math.min(1,a))),t.mul(1-a).add(e.mul(a))},t}();a.default=o,cc._RF.pop()},{}],Projectile:[function(t,e,a){"use strict";cc._RF.push(e,"11bfboWu9RMTKx/EUUtphBv","Projectile"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("./BattleEngine"),r=t("./Character"),n=t("../MainCtrl"),c=cc._decorator,i=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cldr=null,e.lifespan=1,e.AD=0,e.spr=null,e.spfMy=null,e.spfEnemy=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"pos",{get:function(){return this.node.position.mul(o.BattleEngine.pxToMeter)},set:function(t){this.node.position=t.mul(o.BattleEngine.meterToPx)},enumerable:!0,configurable:!0}),e.prototype.setData=function(t,e,a){this.node.groupIndex=t?4:3,this.cldr.apply(),this.AD=e,this.lifespan=a,this.spr.spriteFrame=t?this.spfEnemy:this.spfMy},e.prototype.update=function(t){this.lifespan-=t,this.lifespan<=0&&this.node.destroy()},e.prototype.onBeginContact=function(t,e,a){var o=a.node.getComponent(r.Character);o&&this.takeEffectOn(o),this.node.destroy(),n.default.Instance.engine.playImpactEffect(n.default.Instance.engine.effectContainer.convertToNodeSpace(t.getWorldManifold().points[0]))},e.prototype.takeEffectOn=function(t){Math.random()<=t.DG||t.takeDamage(this.AD)},__decorate([s(cc.PhysicsCollider)],e.prototype,"cldr",void 0),__decorate([s(cc.Sprite)],e.prototype,"spr",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"spfMy",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"spfEnemy",void 0),e=__decorate([i],e)}(cc.Component);a.Projectile=l,cc._RF.pop()},{"../MainCtrl":"MainCtrl","./BattleEngine":"BattleEngine","./Character":"Character"}],PropertyLine:[function(t,e,a){"use strict";cc._RF.push(e,"0e59f47461BO70mP4e6q35L","PropertyLine"),Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,n=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prg=null,e.lblPropertyName=null,e.lblPt=null,e.lblValue=null,e.propertyName="",e.unit="",e}return __extends(e,t),e.prototype.start=function(){this.lblPropertyName.string=this.propertyName},e.prototype.setAndRefresh=function(t,e){this.prg.progress=t/20,this.lblPt.string=t+" pt",this.lblValue.string=e+" "+this.unit},__decorate([n(cc.ProgressBar)],e.prototype,"prg",void 0),__decorate([n(cc.Label)],e.prototype,"lblPropertyName",void 0),__decorate([n(cc.Label)],e.prototype,"lblPt",void 0),__decorate([n(cc.Label)],e.prototype,"lblValue",void 0),__decorate([n(cc.String)],e.prototype,"propertyName",void 0),__decorate([n(cc.String)],e.prototype,"unit",void 0),e=__decorate([r],e)}(cc.Component);a.PropertyLine=c,cc._RF.pop()},{}],RechargePanel:[function(t,e,a){"use strict";cc._RF.push(e,"6fe40yau5dLRKwAtiP/MgV8","RechargePanel"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("../BlockchainMgr"),r=t("../DataMgr"),n=t("../DialogPanel"),c=cc._decorator,i=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.edtValue=null,e.lblNeedMoney=null,e.lblReward=null,e}return __extends(e,t),a=e,e.prototype.onLoad=function(){a.Instance=this,this.node.active=!1},e.prototype.onEnable=function(){this.lblReward.string=r.DataMgr.totalReward.toPrecision(4)+"NAS"},e.prototype.update=function(){var t=parseInt(this.edtValue.string);t&&(t>10*r.DataMgr.totalReward&&t>.1?this.lblNeedMoney.node.color=cc.Color.RED:this.lblNeedMoney.node.color=cc.Color.WHITE,this.lblNeedMoney.string=.01*t+"NAS")},e.prototype.onConfirmClick=function(){var t=this,e=parseInt(this.edtValue.string);e>10*r.DataMgr.totalReward&&e>.1?n.default.PopupWith2Buttons("","充值金额超过了宝藏总额的10倍，充值很有可能失败。\n如果失败，货币回退回您的钱包。","强行充值",function(){t.recharge(e)},"取消",null):this.recharge(e)},e.prototype.recharge=function(t){o.default.Instance.callFunction("recharge",null,t,null)},e.prototype.close=function(){this.node.active=!1},__decorate([s(cc.EditBox)],e.prototype,"edtValue",void 0),__decorate([s(cc.Label)],e.prototype,"lblNeedMoney",void 0),__decorate([s(cc.Label)],e.prototype,"lblReward",void 0),e=a=__decorate([i],e);var a}(cc.Component);a.default=l,cc._RF.pop()},{"../BlockchainMgr":"BlockchainMgr","../DataMgr":"DataMgr","../DialogPanel":"DialogPanel"}],ResultUI:[function(t,e,a){"use strict";cc._RF.push(e,"e7f42dM68VAz487nLcu3wTI","ResultUI"),Object.defineProperty(a,"__esModule",{value:!0});var o=t("./CvsMain"),r=t("./BaseUI"),n=t("./DataMgr"),c=t("./HomeUI"),i=t("./UI/PropertyLine"),s=t("./CharacterActor"),l=t("./BlockchainMgr"),p=cc._decorator,h=p.ccclass,d=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grpWin=null,e.grpLose=null,e.lblNicknameWin=null,e.lblReward=null,e.lblNicknameLose=null,e.lblBounty=null,e.characterActor=null,e.demonActor=null,e.prlHP=null,e.prlAD=null,e.prlFR=null,e.prlRG=null,e.prlDG=null,e}return __extends(e,t),a=e,e.prototype.onLoad=function(){a.Instance=this,this.node.active=!1},e.prototype.onEnable=function(){var t=n.DataMgr.resultData;if(t.isWin)this.grpWin.active=!0,this.grpLose.active=!1,this.lblNicknameWin.string=t.mainCharacterData.nickname,this.lblReward.string=n.DataMgr.totalReward.toPrecision(4)+" NAS";else{this.grpWin.active=!1,this.grpLose.active=!0,this.lblNicknameLose.string=t.mainCharacterData.nickname,this.lblBounty.string=t.bounty.toPrecision(3)+"NAS",this.prlHP.setAndRefresh(t.mainCharacterData.HPPt,n.DataMgr.getHP(t.mainCharacterData.HPPt)),this.prlAD.setAndRefresh(t.mainCharacterData.ADPt,n.DataMgr.getAD(t.mainCharacterData.ADPt)),this.prlFR.setAndRefresh(t.mainCharacterData.FRPt,n.DataMgr.getFR(t.mainCharacterData.FRPt)),this.prlRG.setAndRefresh(t.mainCharacterData.RGPt,n.DataMgr.getRG(t.mainCharacterData.RGPt));var e=n.DataMgr.getDG(t.mainCharacterData.DGPt);e=Math.round(1e4*e)/100,this.prlDG.setAndRefresh(t.mainCharacterData.DGPt,e),this.characterActor.setAndRefresh(t.mainCharacterData.nonce,!1),this.demonActor.setAndRefresh(t.mainCharacterData.nonce,!0)}},e.prototype.onUploadClick=function(){l.default.Instance.callFunction("uploadResult",null,0,null)},e.prototype.onBackClick=function(){o.default.EnterUI(c.default)},__decorate([d(cc.Node)],e.prototype,"grpWin",void 0),__decorate([d(cc.Node)],e.prototype,"grpLose",void 0),__decorate([d(cc.Label)],e.prototype,"lblNicknameWin",void 0),__decorate([d(cc.Label)],e.prototype,"lblReward",void 0),__decorate([d(cc.Label)],e.prototype,"lblNicknameLose",void 0),__decorate([d(cc.Label)],e.prototype,"lblBounty",void 0),__decorate([d(s.CharacterActor)],e.prototype,"characterActor",void 0),__decorate([d(s.CharacterActor)],e.prototype,"demonActor",void 0),__decorate([d(i.PropertyLine)],e.prototype,"prlHP",void 0),__decorate([d(i.PropertyLine)],e.prototype,"prlAD",void 0),__decorate([d(i.PropertyLine)],e.prototype,"prlFR",void 0),__decorate([d(i.PropertyLine)],e.prototype,"prlRG",void 0),__decorate([d(i.PropertyLine)],e.prototype,"prlDG",void 0),e=a=__decorate([h],e);var a}(r.default);a.default=u,cc._RF.pop()},{"./BaseUI":"BaseUI","./BlockchainMgr":"BlockchainMgr","./CharacterActor":"CharacterActor","./CvsMain":"CvsMain","./DataMgr":"DataMgr","./HomeUI":"HomeUI","./UI/PropertyLine":"PropertyLine"}],ToastPanel:[function(t,e,a){"use strict";cc._RF.push(e,"159ccmVx0JBF6iFx9aAYPqK","ToastPanel"),Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,n=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toastTemplate=null,e.container=null,e}return __extends(e,t),a=e,e.prototype.onLoad=function(){a.Instance=this,this.toastTemplate.active=!1},e.prototype.toast=function(t){var e=cc.instantiate(a.Instance.toastTemplate);e.parent=this.container,e.getComponent(cc.Label).string=t,e.active=!0;var o=cc.sequence(cc.delayTime(4.5),cc.fadeOut(.5));e.runAction(o),setTimeout(function(){e.destroy()},5e3)},e.Toast=function(t){a.Instance.toast(t)},__decorate([n(cc.Node)],e.prototype,"toastTemplate",void 0),__decorate([n(cc.Node)],e.prototype,"container",void 0),e=a=__decorate([r],e);var a}(cc.Component);a.default=c,cc._RF.pop()},{}]},{},["BaseUI","BattleEngine","Character","Chest","EnemyAI","Joystick","Projectile","BattleUI","BlockchainMgr","CharacterActor","CvsMain","DataMgr","DialogPanel","Foreground","HomeUI","MainCtrl","ResultUI","AsyncLoadSprite","IntroUI","PropertyLine","RechargePanel","ToastPanel","CurrencyFormatter","MathUtil"]);